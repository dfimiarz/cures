{% extends "base.template.twig" %}

{% block title %}
    CURES - Submitt a work order
{% endblock %}

{% block styles %}
    {{parent()}}
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <style>
        #detailed-stats-pannel{
            display: none;
        };

    </style>

{% endblock %}

{% block dynamicMenuContent %}
{% endblock %}

{% block content %}
    <section class="main-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                    <h2 class="display-4 py-4 text-center"><strong>New request</strong></h2>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                    <div class="alert alert-info">
                        <h6 text-center">Emergancy? You must Call (555) 555-5555 immediately</h6>
                    </div>
                </div>
            </div>
            <form novalidate>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">    
                        <label for="prob_type_input">Request type:</label>
                        <div class="autocomplete_jq">
                            <input type="text" placeholder="e.g Leak" id="problem_type_input" class="form-control" style="margin-bottom: 2px;">
                        </div>
                        <div id="stats-main-container" class="small">
                            Recent activity: Request count:<span> 5</span>, Satisfaction: <span> 50% </span> <a href="./statistics"> see more </a>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label for="req_name_input"> Your name:</label>
                        <input class="form-control" id="req_name_input" name="requester" type="text">
                        <div class="invalid-feedback">
                            Invalid name
                        </div>
                    </div>

                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label for="req_phone_input"> Phone #:  </label>
                        <input class="form-control" id="req_phone_input" name="phone" type="text">
                        <div class="invalid-feedback">
                            Invalid phone
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label for="req_email_input"> E-mail address:  </label>
                        <input class="form-control" id="req_email_input" name="email" type="email">
                        <div class="invalid-feedback">
                            Invalid e-mail
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label for="req_dept_sel"> Department:  </label>    
                        <select class="form-control" id="req_dept_sel" name="dept">
                            <option value="biology">Biology</option>
                            <option value="chemistry">Chemistry</option>
                            <option value="eas">EAS</option>
                            <option value="mathematics">Mathematics</option>
                            <option value="physics">Physics</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="invalid-feedback">
                            Invalid department
                        </div>
                    </div>

                </div>      
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">     
                        <label for="prob_loc_input">Location:</label>
                        <div class="autocomplete_jq">
                            <input type="text" placeholder="Ex. MR 1320" id="problem_loc_input" class="form-control">
                        </div>
                    </div>

                </div>
                <div class="form-check row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="urgent">
                                Urgent request.<small class="text-muted"> Explain in details below</small>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label>Detailed description:</label>
                        <textarea rows="4" class="form-control"></textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label>Additional instructions:</label>
                        <textarea rows="4" class="form-control" placeholder='None'></textarea>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <label for="wo_image" class="button">Attach an image (optional)</label>
                        <input class="form-control-file" type="file" id="wo_image" class="show-for-sr">
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
                        <button type="button" class="btn btn-primary">Submit</button>
                    </div>
                </div>

            </form>     
        </div>
    </section>
{% endblock %} 

{% block javascript %}
    {{parent()}}
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>

        var work_request = {
            type: "",
            requester: "",
            phone: "",
            email: "",
            dept_id: "",
            location: "",
            urgent: 0,
            desc: "",
            inst: ""
            
        }

        var rTypes = ["Cleaning", "Mopping", "Sweeping", "Keys", "Broken pipe", "Radiator leak", "Too cold", "Too warm", "Mice"];

        $(document).ready(function () {
  
            $(function ()
            {
                var rTypes = [
                    "Cleaning",
                    "Mopping",
                    "Sweeping",
                    "Keys",
                    "Broken pipe",
                    "Radiator leak",
                    "Too cold",
                    "Too warm",
                    "Too hot",
                    "Mice",
                    "Dust",
                    "Water leak",
                    "Lock",
                    "Elevator",
                    "Shades"
                ];

                var locations = [
                    "MR 101",
                    "MR 102",
                    "MR 1301",
                    "MR 234",
                    "MR 1201",
                    "MR 1001",
                    "MR 1001A",
                    "NAC 4/321",
                    "MR 1328",
                    "Campus grounds",
                    "MR Male restroom",
                    "MR Femmale Restroom",
                    "Elevator",
                    "CDI 13101"
                ];



                $("#problem_type_input").autocomplete(
                        {source: rTypes}
                );


                $("#problem_loc_input").autocomplete(
                        {
                            source: "/api/location",
                            minLength: 2,
                            select: function(event, ui ){
                                alert( "Selected: " + ui.item.label );
                            }
                        }
                );
            });
            
            $("#show-more-stats-btn").click(function () {
                    alert("Will show more");
            });
        });

    </script>
{% endblock %} 


